#!/usr/bin/env python3

from src.views.panels.mail import MailPanel
from src.views.panels.main import MainPanel
from src.views.tui         import TUI

if __name__ == "__main__":

    main_view = MainPanel()
    tui       = TUI(main_view.body)

    main_view.connect("on_swap", lambda *x: tui.body(x[0]))

    # Declare your views here
    mail_view = MailPanel()

    # Add your views here
    main_view.add_views(
        [
            ("m", mail_view, "Mail"),
        ]
    )

    # Add actions not related to views here
    main_view.add_actions(
        [
            ("q", TUI.quit, "Quit"),
        ]
    )

    # Bind your views to the TUI or the main view here
    mail_view.connect("on_quit", main_view.restore)

    # End of time
    try:
        tui()
    finally:
        tui.loop.screen.stop()
